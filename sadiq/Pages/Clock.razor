@page "/clock"

<div style="width:300px; height:300px; display:flex; justify-content:center; align-items:center;">
    <svg width="250" height="250" viewBox="0 0 100 100" style="background-color:white; border-radius:50%; border:4px solid black;">
        <!-- Saatın mərkəzi -->
        <circle cx="50" cy="50" r="48" stroke="black" stroke-width="2" fill="white" />

        <!-- Saat cizgiləri -->
        @for (int i = 0; i < 12; i++)
        {
            var angle = i * 30;
            var x1 = 50 + 40 * Math.Sin(angle * Math.PI / 180);
            var y1 = 50 - 40 * Math.Cos(angle * Math.PI / 180);
            var x2 = 50 + 45 * Math.Sin(angle * Math.PI / 180);
            var y2 = 50 - 45 * Math.Cos(angle * Math.PI / 180);

            <line x1="@x1" y1="@y1" x2="@x2" y2="@y2" stroke="black" stroke-width="2" />
        }

        <!-- Saat əqrəbləri -->
        <line x1="50" y1="50" x2="@HourX" y2="@HourY" stroke="black" stroke-width="3" stroke-linecap="round"/>
        <line x1="50" y1="50" x2="@MinuteX" y2="@MinuteY" stroke="black" stroke-width="2" stroke-linecap="round"/>
        <line x1="50" y1="50" x2="@SecondX" y2="@SecondY" stroke="red" stroke-width="1.5" stroke-linecap="round"/>

        <!-- Mərkəz nöqtəsi -->
        <circle cx="50" cy="50" r="1.5" fill="black"/>
    </svg>
</div>

@code {
    private Timer? timer;

    protected override void OnInitialized()
    {
        timer = new Timer(UpdateClock, null, 0, 1000);
    }

    private void UpdateClock(object? state)
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        timer?.Dispose();
    }

    private double HourAngle => (DateTime.Now.Hour % 12) * 30 + DateTime.Now.Minute * 0.5;
    private double MinuteAngle => DateTime.Now.Minute * 6;
    private double SecondAngle => DateTime.Now.Second * 6;

    private double HourX => 50 + 20 * Math.Sin(HourAngle * Math.PI / 180);
    private double HourY => 50 - 20 * Math.Cos(HourAngle * Math.PI / 180);

    private double MinuteX => 50 + 30 * Math.Sin(MinuteAngle * Math.PI / 180);
    private double MinuteY => 50 - 30 * Math.Cos(MinuteAngle * Math.PI / 180);

    private double SecondX => 50 + 35 * Math.Sin(SecondAngle * Math.PI / 180);
    private double SecondY => 50 - 35 * Math.Cos(SecondAngle * Math.PI / 180);
}
